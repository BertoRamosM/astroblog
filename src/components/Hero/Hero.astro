---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

const allBlogArticles: CollectionEntry<'blog'>[] = await getCollection('blog');


const sortedArticles = allBlogArticles.sort((a, b) => {
  const dateA = new Date(a.data.pubDate);
  const dateB = new Date(b.data.pubDate);
  return dateB - dateA;
});

const article = sortedArticles[0];

---
<div class="flex flex-row w-full backdrop-blur-xl rounded-xl items-center justify-around mt-32 mb-24 p-12">
  <div>
    <h1 class="text-4xl mb-4">Latest Post</h1>

    <h2 class="text-2xl font-semibold mb-2">
      <a
        href={`/${article.slug}`}
        class="group-hover:text-red-500 cursor-pointer transition-all duration-100"
      >
        {article.data.title}
      </a>
    </h2>
    <p class="text-gray-200 text-sm mb-4">
      {new Date(article.data.pubDate).toLocaleDateString()}
    </p>
    <div class="flex gap-4 flex-wrap">
      {article.data.tags.map((tag) => (
        <span class="px-2 py-1 bg-transparent border-2 border-white text-white rounded-full text-xs hover:opacity-90 hover:text-red-300 cursor-pointer transition-all duration-100 hover:border-red-500">
          <a href={`/articles/tag` + tag}>{tag}</a>
        </span>
      ))}
    </div>
  </div>

  <div>
    <a href={`/${article.slug}`}>
      {article.data.image ? (
        <img
          src={article.data.image}
          alt={article.data.title}
          class="w-1/2 h-48 object-cover hover:scale-110 transition duration-200 ease-in-out rounded-t-xl my-8"
        />
      ) : (
        <p>Loading ...</p>
      )}
    </a>
  </div>
</div>
